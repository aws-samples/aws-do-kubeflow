name: 'PyTorch Operator - Training Job'
description: Kubeflow PyTorchJob launcher
inputs:
- {name: name,                       type: String,                          description: 'PyTorchJob name.'}
- {name: namespace,                  type: String,      default: kubeflow,  description: 'PyTorchJob namespace (likely your current namespace).'}
- {name: version,                    type: String,      default: v1,        description: 'PyTorchJob version.'}
- {name: master_spec,                type: JsonObject,  default: '{}',      description: 'PyTorchJob Master replicaSpecs.'}
- {name: worker_spec,                type: JsonObject,  default: '{}',      description: 'PyTorchJob Worker replicaSpecs.'}
- {name: job_timeout_minutes,        type: Integer,     default: 1440,      description: 'Time in minutes to wait for the job to complete.'}
- {name: delete_after_done,          type: Boolean,     default: 'True' ,   description: 'Whether to delete the job after it is finished.'}
- {name: run_policy,                 type: JsonObject,  default: '{}',      description: 'PyTorchJob runPolicy'}
implementation:
  container:
    image: {image_url}
    command: ["python", "/ml/launch_pytorchjob.py"]
    args: 
      - --name
      - {inputValue: name}
      - --namespace
      - {inputValue: namespace}
      - --version
      - {inputValue: version}
      - --masterSpec
      - {inputValue: master_spec}
      - --workerSpec
      - {inputValue: worker_spec}
      - --jobTimeoutMinutes
      - {inputValue: job_timeout_minutes}
      - --deleteAfterDone
      - {inputValue: delete_after_done}
      - --runPolicy
      - {inputValue: run_policy}